{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <h1>Checkout</h1>
    <div id="cart-items-container">
      <!-- Cart items will be dynamically added here -->
    </div>
    <div id="total-price">
      <!-- Total price will be dynamically updated here -->
    </div>

    <script>
      $(document).ready(function () {
        // Fetch cart items from server
        $.getJSON("/cart/items/", function (response) {
          var cartItems = response.cart_items;
          var totalPrice = 0;

          // Iterate over cart items and display them
          cartItems.forEach(function (item) {
            var itemHtml = '<div class="cart-item">';
            itemHtml += "<p>" + item.product_id + "</p>";
            itemHtml += "<p>Quantity: " + item.quantity + "</p>";
            itemHtml += "<p>Price: $" + item.item_price + "</p>";
            itemHtml += "</div>";

            $("#cart-items-container").append(itemHtml);

            // Calculate total price
            totalPrice += parseFloat(item.item_price);
          });

          // Display total price
          $("#total-price").text("Total Price: $" + totalPrice.toFixed(2));
        });
      });
    </script>
  </body>
</html>
